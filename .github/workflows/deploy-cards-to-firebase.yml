name: Sync Cards to Firebase

on:
workflow_dispatch: # allow manual run
push:
  paths: 
  -'cards/*.json' # triggers when any card file is updated
  -'.github/workflows/deploy-cards-to-firebase.yml'

  jobs:
      deploy:
        runs-on: unbuntu-latest

        steps:
        -name: Checkout Repository
        uses: actions/checkout@v3
        with:
        node-version: '18'

        -name: Install Firebase CLI
        run:npm install -g firebase-tools

        -name: Deploy to Firebase
        env:
        FIREBASE_TOKEN: ${{ secrets.FIREBASE_TOKEN}}
        run: | 
        firebase deploy --only firestore \
        --project PROJECT ID\
        --token "$FIREBASE_TOKEN"
